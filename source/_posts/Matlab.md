---
title: Matlab的基本语法
date: 2023-01-02 19:54:26
categories: 
- 数学建模
tags: 
- matlab
- 数学建模
---
matlab基本语法的熟悉
<!--more-->

## 命令

在窗口的上方有个地址栏，可以在这里切换目录

命令行窗口中输入**clc**可以清除命令行窗口

命令clear可以清除变量

命令clear all可以清除workspace中的**所有变量**

命令who可以显示工作空间中的所有变量，whos可以显示工作空间中所有变量的详细属性

Matlab中使用逗号,和分号;来分隔命令

format命令可以指定输出的格式

save 文件名 变量名列表 用于将变量存进对应文件中

```matlab
save 'xxx.mat' a b
save('xxx.mat','a','b')
```

load命令可以进行变量的读取

```matlab
load mydata a b % 从mydata中读取a和b
```



在工具栏编辑器中的新建可以新建脚本，当前主要使用的是脚本（相当于程序代码）

## 变量与运算符

变量的命名规则同标识符，部分变量被系统预定义了：

- pi：圆周率
- inf和Inf：表示无穷大
- nan和NaN：表示一个不定值（not a number），如0/0
- i和j：表示虚数的虚部
- ans：表示运算结果

Matlab中常用的数学运算符有：

- 加法+
- 减法-
- 乘法*
- 除法/（右除）\（左除）
- 求幂 :^
- 点乘.*（矩阵各项都乘）
- 点除./（矩阵各项都除）
- 点幂.^（矩阵各项都求幂）



%和%% 表示注释

```matlab
%% 这是注释
% 这也是注释
```

如果语句很长，可以用...来延续到下一行

## Matlab的数据类型

- 数字
- 字符和字符串
- 矩阵
- 元胞数组
- 结构体

### 数字

单纯的数字

随机数：rand，randi，randn

- rand([randstream,]m,n[,precision])生成m到n的随机数，默认为0到1；可以指定种子和精度
- randi([iMin,iMax],m,n)在开区间(iMin,iMax)生成m * n的随机整数矩阵
- randn()生成标准正态分布的随机数，可以指定均值和方差

### 字符和字符串

字符串，用**单引号'   '**表示

采用ascii码，有length函数和num2str函数，char函数等

### 矩阵

矩阵使用**中括号[]**括起来表示，使用**回车或分号;**去划分矩阵的每一行，使用**空格 或逗号,**去划分矩阵一行中的每一个元素。要注意的是，**矩阵中的每一行的元素个数都要相同**。

```matlab
matrix = [1,2,3;4,5,6;7,8,9]
matrix = [1 2 3;4 5 6;7 8 9]
相当于矩阵：
[1,2,3
 4,5,6
 7,8,9]
```

矩阵中使用**单引号'**表示转置

``` matlab
matrix = [1,2,3;4,5,6;7,8,9]
matrixT = matrix' % matrixT是matrix的转置矩阵
matrixT = [1,4,7
		  2,5,8
 		  3,6,9]
```

矩阵中使用(:)将矩阵降维拉伸

```matlab
matrix = [1,2,3;4,5,6;7,8,9]
matrixL = matrix(:) % matrixT是matrix的转置矩阵
matrixL = [1
		  4
 		  7
 		  2
 		  5
 		  8
 		  3
 		  6
 		  9]
```

矩阵的逆矩阵，使用函数inv求得：

inv(A)求得矩阵A的逆矩阵（A\*inv(A)=inv(A)\*A=I（单位矩阵））

除了使用[]之外，还有许多方法可以创建矩阵

1. 使用num1:num2获取一行的矩阵，之后使用reshape(矩阵，行数，列数)改变shape
2. 使用num1:num2获取一行的矩阵，之后使用diag函数创建对角矩阵（元素都在对角线上）
3. 从文件中导入
4. 从矩阵运算中得到
5. 使用创建矩阵的函数（指定行、列和维度（可选）），eye()创建单位矩阵，zeros()创建0矩阵，ones()创建1矩阵，rand()创建随机元素的矩阵，size()可以获取矩阵的行和列用于辅助，length()可以获取向量的长度
6. magic(n)函数生成n阶幻方，横竖斜的n个元素之和都相等
7. repmat(x,m,n)将矩阵行重复m次，列重复n次

矩阵的索引操作：

使用**(行，列，维度)**进行索引，可以使用:进行切片，需要注意的是，**Matlab中的索引是从1开始的**，并且索引不能为负数

find(condition)函数可以返回矩阵中满足条件的值的下标，如find(A>20)可以返回矩阵A中>20的值的下标

冒号:可以用来生成等差数列，**第一项:公差（步长）:最后一项**

### 元胞数组

相当于python中的list，**可以容纳不同类型元素的数组**。

元胞数组的创建：

使用cell(m,n)创建一个m行*n列的元胞数组，元胞数组使用**大括号{}**进行索引

### 结构体

使用struct()进行创建，采用键值对表示数据

## 程序流程控制

Matlab本身会由上到下按顺序执行语句

### 循环

```matlab
for 循环变量=初值[:步长]:终值
	执行语句
end

while 条件表达式
	执行语句
end
```

### 条件

```matlab
if 条件表达式
	执行语句
else
	执行语句
end

switch 表达式（数字或字符）
	case 数字或字符
		执行语句
	...
	otherwise
		执行语句
end
```

## 绘图

类似plt

```matlab
x=...
y=...
figure % 建立一个幕布
plot(x,y)
title('...') % 设置标题
xlabel('...') % 设置x坐标
ylabel('...') % 设置y坐标
xlim([xMin xMax]) % 限制坐标轴的范围

plotyy()% 可以在一个x坐标中绘制多条曲线

```



## 程序设计

Matlab语言编写的程序称为M文件，共有命令文件和函数文件两类

- 命令文件：没有输入参数，不返回输出参数
- 函数文件：可以输入参数，也可以返回输出参数

每一个函数文件定义一个函数，函数文件由于function语句引导，

```matl
function 输出形参表=函数名(输入形参表)
函数体
```

当输出形参多于1个的时候应该用[]括起来

